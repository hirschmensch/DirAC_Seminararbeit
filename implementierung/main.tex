In diesem Abschnitt wird beschrieben, wie der DirAC-Algorithmus in diesem Projekt implementiert wurde. Die Implementierung liegt als Script für GNU Octave vor und nutzt das \textit{signal}-Package. Der Code dafür ist zu großen Teilen direkt dem Buch \textit{Parametric Time-Frequency Domain Spatial Audio} ~\cite{spatial-book} von V. Pulkki entnommen.

\paragraph{Übersicht}
Zu Beginn des Skriptes wird das Eingangssignal im B-Format erster Ordnung eingelesen. Dieses muss als \textit{.wav}-Datei vorliegen und genau vier Kanäle (in der Reihenfolge $w$, $x$, $y$, $z$) umfassen. Die Samplerate wird direkt aus dieser Datei ermittelt und als Variable \textit{fs} im Workspace von GNU Octave gespeichert.

---
Anschließend wird eine VBAP-Matrix, je nach vorgegebener Lautsprecherandordnung erzeugt. Diese Matrix wird in späterer Folge verwendet, um das Eingangssignal im B-Format, auf eine bestimmte Lautsprecheranordnung zu dekodieren. Es handelt sich dabei also um eine nicht-parametrische Dekodierung, die mit einer Anordnung von virtuellen Mikrofonen zu vergleichen ist.
---

Die Lautsprecherpositionen können dabei als sphärische Koordinaten in einer Matrix vorliegen, oder auch aus einer Textdatei mit kartesischen Koordinaten eingelesen werden. Das Einlesen von kartesischen Koordinaten ist speziell für die Dekodierung auf größere t-Designs äußerst nützlich.

Die vier Kanäle $w[n]$, $x[n]$, $y[n]$ und $z[n]$ des B-Format Eingangssginals werden anschließend in einer Schleife in zeitlichen Blöcken (Fenster) verarbeitet. Ein Fenster besteht dabei aus jeweils 512 Samples und wird in einer 1024-Punkt Fouriertransformation mit der Hilfe der Funktion \textit{fft()} in den Frequenzbereich transformiert. Die FFT-Länge wurde als doppelte Blocklänge gewählt um Aliasing zu vermeiden. Die zeitlichen Blöcke werden noch mit einem Hann-Fenster für die Resynthese beaufschlagt. Ein Hann-Fenster kann in Octave mit der Funktion \textit{hann()} (alternativ: \textit{hanning(), abgeleitet von ``to hann''}) erzeugt, und einfach als Vektor mit den Zeitsignalen multipliziert werden.
